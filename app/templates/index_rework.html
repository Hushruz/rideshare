{% extends "layout.html" %}

{% block title %}Ride{% endblock %}

{% block head %}
<link rel="stylesheet" href="static/jquery.dataTables.css" type="text/css" media="screen" />
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-15355461-1");
pageTracker._trackPageview();
} catch(err) {
}
</script>
{% endblock %}

{% block main %}
<input type="hidden"name="name" value="{{user}}" id="idnum" />
<div class="container">
	<div class="col-md-8">
		<div id="map_canvas"></div>
	</div>
	<div class="col-md-4">
		<div>
			<p>Click anywhere on the map to create a destination or starting point. You may want to zoom in first. You can add yourself to a ride by clicking on one of the red or green pushpins on the map.
			<br><br>
			Enter an address or filter the pushpins by date using the controls on the right.
			<br>
	       </p>
        </div>
        <div>
			<form action="#" onsubmit="showAddress(this.address.value); return false">
				Enter an address or city, state to create a ride:
				<input type="text" size="60" id="address" name="address" />
				<input type="submit" value="Go!" />
			</form>
        </div>
	</div>
</div>
{% endblock %}

{% block scripts %}

<script src="static/json-template.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
<script src="static/jquery.dataTables.js" type="text/javascript"></script>
<script src="static/jquery-ui-1.9.0.custom.min.js" type="text/javascript"></script>
<script src="static/functions.js" type="text/javascript"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyB15X6ti6tDQUQKjwPCI2zi3XFfxZW3MGM&sensor=true" type="text/javascript">
</script>
<script src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/src/markerclusterer.js" type="text/javascript"></script>
<script>
if(window.attachEvent) {
    window.attachEvent('onload', yourFunctionName);
} else {
    if(window.onload) {
        var curronload = window.onload;
        var newonload = function() {
            curronload();
            initialize('{{message}}')
        };
        window.onload = newonload;
    } else {
        window.onload = initialize('{{message}}');
    }
}
function detectBrowser() {
  var useragent = navigator.userAgent;
  var mapdiv = document.getElementById("map-canvas");

  if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1 ) {
    mapdiv.style.width = '100%';
    mapdiv.style.height = '100%';
  } else {
    mapdiv.style.width = '600px';
    mapdiv.style.height = '800px';
  }
}
</script>
{% endblock %}